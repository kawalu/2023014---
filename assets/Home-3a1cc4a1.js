import{u as H,_ as L}from"./settings-26d975d6.js";import{u as W}from"./list-ccd906ab.js";import{g as j,o as q,a as M,b as U,n as R,u as B,r as A,w as $,c as I,_ as z,s as V,d as y,e as J,f as S,h as w,V as K,F as Q,i as x,t as b,j as C,k as N,p as X,l as Y,m as k}from"./index-69674129.js";import{V as Z,a as P}from"./VRow-14784eda.js";function E(e){return j()?(q(e),!0):!1}function T(){const e=new Set,n=s=>{e.delete(s)};return{on:s=>{e.add(s);const a=()=>n(s);return E(a),{off:a}},off:n,trigger:s=>Promise.all(Array.from(e).map(a=>a(s)))}}function F(e){return typeof e=="function"?e():B(e)}const ee=typeof window<"u",te=()=>{};function ne(e,n=!0){M()?U(e):n?e():R(e)}function oe(e){var n;const o=F(e);return(n=o==null?void 0:o.$el)!=null?n:o}const D=ee?window:void 0;function se(...e){let n,o,t,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,t,s]=e,n=D):[n,o,t,s]=e,!n)return te;Array.isArray(o)||(o=[o]),Array.isArray(t)||(t=[t]);const a=[],f=()=>{a.forEach(c=>c()),a.length=0},m=(c,r,i,u)=>(c.addEventListener(r,i,u),()=>c.removeEventListener(r,i,u)),g=$(()=>[oe(n),F(s)],([c,r])=>{f(),c&&a.push(...o.flatMap(i=>t.map(u=>m(c,i,u,r))))},{immediate:!0,flush:"post"}),p=()=>{g(),f()};return E(p),p}function re(){const e=A(!1);return M()&&U(()=>{e.value=!0}),e}function ie(e){const n=re();return I(()=>(n.value,!!e()))}function ae(e={}){const{window:n=D}=e,o=ie(()=>!!n&&"Notification"in n),t=A(null),s=async()=>{o.value&&"permission"in Notification&&Notification.permission!=="denied"&&await Notification.requestPermission()},{on:a,trigger:f}=T(),{on:m,trigger:g}=T(),{on:p,trigger:c}=T(),{on:r,trigger:i}=T(),u=async d=>{if(!o.value)return;await s();const l=Object.assign({},e,d);return t.value=new Notification(l.title||"",l),t.value.onclick=f,t.value.onshow=g,t.value.onerror=c,t.value.onclose=i,t.value},v=()=>{t.value&&t.value.close(),t.value=null};if(ne(async()=>{o.value&&await s()}),E(v),o.value&&n){const d=n.document;se(d,"visibilitychange",l=>{l.preventDefault(),d.visibilityState==="visible"&&v()})}return{isSupported:o,notification:t,show:u,close:v,onClick:a,onShow:m,onError:p,onClose:r}}const ce=e=>(X("data-v-1e9fc49a"),e=e(),Y(),e),ue=ce(()=>x("img",{class:"img123",src:L},null,-1)),le={__name:"Home",setup(e){const n=W(),{items:o,currentItem:t,timeleft:s}=V(n),{countdown:a,setCurrentItem:f,setFinishItem:m}=n,g=H(),{selectedAlarmFile:p,notify:c}=V(g),r={STOP:0,COUNTING:1,PAUSE:2},i=A(r.STOP);let u=0;const v=()=>{i.value===r.STOP&&o.value.length>0&&f(),t.value.length!==0&&(i.value=r.COUNTING,u=setInterval(()=>{a(),s.value===0&&l()},1e3))},d=()=>{i.value=r.PAUSE,clearInterval(u)},l=()=>{clearInterval(u),i.value=r.STOP;const _=new Audio;if(_.src=p.value,_.play(),c.value){const{show:h}=ae({title:"事項完成",body:O.value,icon:"https://github.com/wdaweb.png"});h()}m(),o.value.length>0&&v()},O=I(()=>t.value.length>0?t.value:o.value.length>0?"點擊開始":"沒有事項"),G=I(()=>{const _=Math.floor(s.value/60).toString().padStart(2,"0"),h=(s.value%60).toString().padStart(2,"0");return _+":"+h});return(_,h)=>(y(),J(Q,null,[S(K,null,{default:w(()=>[S(Z,{class:"text-center"},{default:w(()=>[S(P,{class:"text123",cols:"12"},{default:w(()=>[x("h1",null,b(O.value),1),x("h1",null,b(G.value),1)]),_:1}),S(P,{cols:"12"},{default:w(()=>[i.value!==r.COUNTING?(y(),C(k,{key:0,variant:"text",icon:"mdi-play",onClick:v})):N("",!0),i.value===r.COUNTING?(y(),C(k,{key:1,variant:"text",icon:"mdi-pause",onClick:d})):N("",!0),B(t).length>0?(y(),C(k,{key:2,variant:"text",icon:"mdi-skip-next",onClick:l})):N("",!0)]),_:1})]),_:1})]),_:1}),ue],64))}},me=z(le,[["__scopeId","data-v-1e9fc49a"]]);export{me as default};
